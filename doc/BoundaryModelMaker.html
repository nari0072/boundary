<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: BoundaryModelMaker
  
    &mdash; Documentation by YARD 0.9.5
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "BoundaryModelMaker";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="class_list.html"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index (B)</a> &raquo;
    
    
    <span class="title">BoundaryModelMaker</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <iframe id="search_frame" src="class_list.html"></iframe>

      <div id="content"><h1>Class: BoundaryModelMaker
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Poscar</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Poscar</li>
          
            <li class="next">BoundaryModelMaker</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/boundary/model/maker.rb<span class="defines">,<br />
  lib/boundary/model/maker90.rb</span>
</dd>
  </dl>
  
</div>





  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">#<strong>options</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute options.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#display-instance_method" title="#display (instance method)">#<strong>display</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#expanding-instance_method" title="#expanding (instance method)">#<strong>expanding</strong>(n_ex, odd_or_even = :zero)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(file_name, nx, ny, nz, rot_num, opts = {})  &#x21d2; BoundaryModelMaker </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of BoundaryModelMaker.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mirroring-instance_method" title="#mirroring (instance method)">#<strong>mirroring</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ninety_degree_expanding-instance_method" title="#ninety_degree_expanding (instance method)">#<strong>ninety_degree_expanding</strong>(n_ex)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#poscar_format-instance_method" title="#poscar_format (instance method)">#<strong>poscar_format</strong>(a0 = 8.0827999115/2.0)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>real POSCAR for Al lattice parameter(a0=4.04…).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#previewer_format-instance_method" title="#previewer_format (instance method)">#<strong>previewer_format</strong>(a0 = 8.0827999115/2.0)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>real POSCAR for Al lattice parameter(a0=4.04…).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rotating-instance_method" title="#rotating (instance method)">#<strong>rotating</strong>(theta)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shaping-instance_method" title="#shaping (instance method)">#<strong>shaping</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#translating-instance_method" title="#translating (instance method)">#<strong>translating</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(file_name, nx, ny, nz, rot_num, opts = {})  &#x21d2; <tt><span class='object_link'><a href="" title="BoundaryModelMaker (class)">BoundaryModelMaker</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns a new instance of BoundaryModelMaker</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker.rb', line 14</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_file_name'>file_name</span><span class='comma'>,</span> <span class='id identifier rubyid_nx'>nx</span><span class='comma'>,</span> <span class='id identifier rubyid_ny'>ny</span><span class='comma'>,</span> <span class='id identifier rubyid_nz'>nz</span><span class='comma'>,</span> <span class='id identifier rubyid_rot_num'>rot_num</span><span class='comma'>,</span> <span class='id identifier rubyid_opts'>opts</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_p'>p</span> <span class='ivar'>@options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='label'>output:</span> <span class='symbol'>:normal</span><span class='comma'>,</span><span class='label'>rotate:</span> <span class='symbol'>:non_zero</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_theta'>theta</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_rot_num'>rot_num</span> <span class='op'>==</span> <span class='int'>0</span> <span class='rparen'>)</span> <span class='op'>?</span> <span class='float'>0.0</span> <span class='op'>:</span>  <span class='id identifier rubyid_atan'>atan</span><span class='lparen'>(</span><span class='float'>1.0</span><span class='op'>/</span><span class='id identifier rubyid_rot_num'>rot_num</span><span class='period'>.</span><span class='id identifier rubyid_to_f'>to_f</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:rotate</span><span class='rbracket'>]</span><span class='op'>=</span><span class='symbol'>:zero</span> <span class='kw'>if</span> <span class='id identifier rubyid_rot_num'>rot_num</span> <span class='op'>==</span> <span class='int'>0</span>
  <span class='id identifier rubyid_p'>p</span> <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_file_name'>file_name</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_print'>print</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expanding vector and angle:</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_n_ex'>n_ex</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_nx'>nx</span><span class='comma'>,</span><span class='id identifier rubyid_ny'>ny</span><span class='comma'>,</span><span class='id identifier rubyid_nz'>nz</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_p'>p</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>n_ex=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_p'>p</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>theta=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_theta'>theta</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_p'>p</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'># 初期の参照構造の表示</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_print'>print</span> <span class='id identifier rubyid_display'>display</span><span class='lparen'>(</span><span class='rparen'>)</span> 
  <span class='id identifier rubyid_expanding'>expanding</span><span class='lparen'>(</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rotating'>rotating</span><span class='lparen'>(</span><span class='id identifier rubyid_theta'>theta</span><span class='rparen'>)</span>    <span class='comment'># 回転
</span>  <span class='id identifier rubyid_translating'>translating</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='comment'># x&lt;0の原子を反対側に付ける
</span>  <span class='id identifier rubyid_mirroring'>mirroring</span><span class='lparen'>(</span><span class='rparen'>)</span>   <span class='comment'># 鏡映操作
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="options-instance_method">
  
    #<strong>options</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute options</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker.rb', line 12</span>

<span class='kw'>def</span> <span class='id identifier rubyid_options'>options</span>
  <span class='ivar'>@options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="display-instance_method">
  
    #<strong>display</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33
34
35
36</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker.rb', line 31</span>

<span class='kw'>def</span> <span class='id identifier rubyid_display'>display</span>
  <span class='kw'>case</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:output</span><span class='rbracket'>]</span>
    <span class='kw'>when</span> <span class='symbol'>:unit</span> <span class='kw'>then</span> <span class='id identifier rubyid_poscar_format'>poscar_format</span><span class='lparen'>(</span><span class='float'>1.0</span><span class='rparen'>)</span> <span class='comment'>#unit POSCAR
</span>    <span class='kw'>when</span> <span class='symbol'>:normal</span> <span class='kw'>then</span> <span class='id identifier rubyid_poscar_format'>poscar_format</span> <span class='comment'>#real POSCAR for Al 2times 
</span>  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="expanding-instance_method">
  
    #<strong>expanding</strong>(n_ex, odd_or_even = :zero)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker.rb', line 38</span>

<span class='kw'>def</span> <span class='id identifier rubyid_expanding'>expanding</span><span class='lparen'>(</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='comma'>,</span><span class='id identifier rubyid_odd_or_even'>odd_or_even</span><span class='op'>=</span><span class='symbol'>:zero</span><span class='rparen'>)</span>
  <span class='ivar'>@lat_vec</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_vec'>vec</span><span class='op'>|</span> 
    <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_vec'>vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>*=</span> <span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@pos</span><span class='comma'>,</span><span class='id identifier rubyid_old_pos'>old_pos</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='ivar'>@pos</span>
  <span class='kw'>case</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:rotate</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:zero</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_n0'>n0</span><span class='comma'>,</span><span class='id identifier rubyid_n1'>n1</span><span class='comma'>,</span><span class='id identifier rubyid_n2'>n2</span><span class='op'>=</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='symbol'>:non_zero</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_n0'>n0</span><span class='comma'>,</span><span class='id identifier rubyid_n1'>n1</span><span class='comma'>,</span><span class='id identifier rubyid_n2'>n2</span><span class='op'>=</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>+</span><span class='int'>1</span><span class='comma'>,</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>+</span><span class='int'>1</span><span class='comma'>,</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
    <span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>-=</span><span class='float'>0.5</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_n0'>n0</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_n1'>n1</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span>
      <span class='id identifier rubyid_n2'>n2</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
        <span class='id identifier rubyid_old_pos'>old_pos</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p0'>p0</span><span class='op'>|</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_p0'>p0</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>+</span><span class='float'>1.0</span><span class='op'>*</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_p0'>p0</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>+</span><span class='float'>1.0</span><span class='op'>*</span><span class='id identifier rubyid_j'>j</span><span class='rparen'>)</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_p0'>p0</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='op'>+</span><span class='float'>1.0</span><span class='op'>*</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
          <span class='ivar'>@pos</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pos'>pos</span>
        <span class='kw'>end</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@pos_size</span><span class='op'>=</span><span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mirroring-instance_method">
  
    #<strong>mirroring</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker.rb', line 94</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mirroring'>mirroring</span>
  <span class='id identifier rubyid_pos1'>pos1</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_lat_vec2'>lat_vec2</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span>
    <span class='id identifier rubyid_lat_vec2'>lat_vec2</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='op'>-</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='rbrace'>}</span>

  <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>|</span>
    <span class='id identifier rubyid_r_pos'>r_pos</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='float'>0.0</span><span class='comma'>,</span> <span class='float'>0.0</span><span class='comma'>,</span> <span class='float'>0.0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_r_pos2'>r_pos2</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='float'>0.0</span><span class='comma'>,</span> <span class='float'>0.0</span><span class='comma'>,</span> <span class='float'>0.0</span><span class='rbracket'>]</span>
    <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span>
      <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
        <span class='id identifier rubyid_r_pos'>r_pos</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='op'>+=</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='op'>*</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='semicolon'>;</span>
        <span class='id identifier rubyid_r_pos2'>r_pos2</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='op'>+=</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='op'>*</span><span class='id identifier rubyid_lat_vec2'>lat_vec2</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='semicolon'>;</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_pos1'>pos1</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_r_pos'>r_pos</span>
    <span class='id identifier rubyid_pos1'>pos1</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_r_pos2'>r_pos2</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_pos1'>pos1</span><span class='period'>.</span><span class='id identifier rubyid_uniq!'>uniq!</span>
  <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:rotate</span><span class='rbracket'>]</span><span class='op'>==</span><span class='symbol'>:zero</span> <span class='kw'>then</span>
    <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_x'>x</span><span class='op'>=</span><span class='op'>-</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_a'>a</span><span class='op'>=</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>+</span><span class='lparen'>(</span><span class='float'>1.0</span><span class='op'>+</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>*</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>+</span><span class='lparen'>(</span><span class='float'>1.0</span><span class='op'>+</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>*</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
<span class='comment'>#      @lat_vec[1][1]-=0.5
</span>    <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_a'>a</span><span class='op'>=</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>+</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_b'>b</span><span class='op'>=</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>+</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>-</span><span class='float'>0.5</span>
  <span class='kw'>end</span>
  <span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>=</span><span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='float'>0.0</span><span class='comma'>,</span><span class='float'>0.0</span><span class='rbracket'>]</span>
  <span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>=</span><span class='lbracket'>[</span><span class='float'>0.0</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span><span class='float'>0.0</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_p'>p</span> <span class='ivar'>@lat_vec</span>
  <span class='id identifier rubyid_p'>p</span> <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='ivar'>@pos</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_pos1'>pos1</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:rotate</span><span class='rbracket'>]</span><span class='op'>==</span><span class='symbol'>:zero</span> <span class='kw'>then</span>
      <span class='ivar'>@pos</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>&gt;=</span><span class='op'>-</span><span class='id identifier rubyid_a'>a</span><span class='op'>-</span><span class='const'>TINY</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>&lt;</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
          <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>&gt;=</span><span class='int'>0</span><span class='op'>-</span><span class='const'>TINY</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>&lt;</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span> <span class='kw'>then</span>
        <span class='ivar'>@pos</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='op'>/</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@pos_size</span> <span class='op'>=</span> <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ninety_degree_expanding-instance_method">
  
    #<strong>ninety_degree_expanding</strong>(n_ex)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker90.rb', line 44</span>

<span class='kw'>def</span> <span class='id identifier rubyid_ninety_degree_expanding'>ninety_degree_expanding</span><span class='lparen'>(</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='rparen'>)</span>
  <span class='ivar'>@lat_vec</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_vec'>vec</span><span class='op'>|</span> 
    <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span> <span class='id identifier rubyid_vec'>vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>*=</span> <span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@pos</span><span class='comma'>,</span><span class='id identifier rubyid_old_pos'>old_pos</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='ivar'>@pos</span>
  <span class='id identifier rubyid_n0'>n0</span><span class='comma'>,</span><span class='id identifier rubyid_n1'>n1</span><span class='comma'>,</span><span class='id identifier rubyid_n2'>n2</span><span class='op'>=</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>+</span><span class='int'>2</span><span class='comma'>,</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>+</span><span class='int'>2</span><span class='comma'>,</span><span class='id identifier rubyid_n_ex'>n_ex</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_n0'>n0</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_n1'>n1</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span>
      <span class='id identifier rubyid_n2'>n2</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
        <span class='id identifier rubyid_old_pos'>old_pos</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_p0'>p0</span><span class='op'>|</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_p0'>p0</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>+</span><span class='float'>1.0</span><span class='op'>*</span><span class='id identifier rubyid_i'>i</span><span class='rparen'>)</span><span class='op'>/</span><span class='id identifier rubyid_n0'>n0</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_p0'>p0</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>+</span><span class='float'>1.0</span><span class='op'>*</span><span class='id identifier rubyid_j'>j</span><span class='rparen'>)</span><span class='op'>/</span><span class='id identifier rubyid_n1'>n1</span>
          <span class='id identifier rubyid_pos'>pos</span> <span class='op'>&lt;&lt;</span> <span class='lparen'>(</span><span class='id identifier rubyid_p0'>p0</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='op'>+</span><span class='float'>1.0</span><span class='op'>*</span><span class='id identifier rubyid_k'>k</span><span class='rparen'>)</span><span class='op'>/</span><span class='id identifier rubyid_n2'>n2</span>
          <span class='ivar'>@pos</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pos'>pos</span>
        <span class='kw'>end</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@pos_size</span><span class='op'>=</span><span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="poscar_format-instance_method">
  
    #<strong>poscar_format</strong>(a0 = 8.0827999115/2.0)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>real POSCAR for Al lattice parameter(a0=4.04…)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152
153
154</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker.rb', line 141</span>

<span class='kw'>def</span> <span class='id identifier rubyid_poscar_format'>poscar_format</span><span class='lparen'>(</span><span class='id identifier rubyid_a0'>a0</span><span class='op'>=</span><span class='float'>8.0827999115</span><span class='op'>/</span><span class='float'>2.0</span><span class='rparen'>)</span> <span class='comment'>#real POSCAR for Al lattice parameter(a0=4.04...)
</span>  <span class='id identifier rubyid_text'>text</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='ivar'>@head</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%f\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='ivar'>@whole_scale</span><span class='rparen'>)</span>

  <span class='ivar'>@lat_vec</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_vec'>vec</span><span class='op'>|</span> 
    <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%15.10f %15.10f %15.10f\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_a0'>a0</span><span class='op'>*</span><span class='float'>2.0</span><span class='op'>*</span><span class='id identifier rubyid_vec'>vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_a0'>a0</span><span class='op'>*</span><span class='id identifier rubyid_vec'>vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_a0'>a0</span><span class='op'>*</span><span class='id identifier rubyid_vec'>vec</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='ivar'>@pos_size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Selective dynamics\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Direct\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>|</span> <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%15.10f %15.10f %15.10f T T T \n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='lparen'>(</span><span class='float'>1.0</span><span class='op'>+</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='op'>/</span><span class='float'>2.0</span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_text'>text</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="previewer_format-instance_method">
  
    #<strong>previewer_format</strong>(a0 = 8.0827999115/2.0)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>real POSCAR for Al lattice parameter(a0=4.04…)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker90.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_previewer_format'>previewer_format</span><span class='lparen'>(</span><span class='id identifier rubyid_a0'>a0</span><span class='op'>=</span><span class='float'>8.0827999115</span><span class='op'>/</span><span class='float'>2.0</span><span class='rparen'>)</span> <span class='comment'>#real POSCAR for Al lattice parameter(a0=4.04...)
</span>  <span class='id identifier rubyid_text'>text</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='ivar'>@head</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%f\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='ivar'>@whole_scale</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_p'>p</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BOB</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_p'>p</span> <span class='ivar'>@lat_vec</span>
  <span class='id identifier rubyid_p'>p</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BOB</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@lat_vec</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_vec'>vec</span><span class='op'>|</span> 
<span class='comment'>#      text &lt;&lt; sprintf(&quot;%15.10f %15.10f %15.10f\n&quot;,a0*2.0*vec[0],a0*vec[1],a0*vec[2]) 
</span>    <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%15.10f %15.10f %15.10f\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_a0'>a0</span><span class='op'>*</span><span class='id identifier rubyid_vec'>vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_a0'>a0</span><span class='op'>*</span><span class='id identifier rubyid_vec'>vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_a0'>a0</span><span class='op'>*</span><span class='id identifier rubyid_vec'>vec</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span> 
<span class='comment'># vec[0] is set to be 2.0 times for the viewer.
</span>  <span class='rbrace'>}</span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%d\n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='ivar'>@pos_size</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Direct\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='comment'>#    @pos.each{|pos| text &lt;&lt; sprintf(&quot;%15.10f %15.10f %15.10f T T T \n&quot;,(1.0+pos[0])/2.0,pos[1],pos[2])}
</span>  <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>|</span> <span class='id identifier rubyid_text'>text</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%15.10f %15.10f %15.10f T T T \n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span>
<span class='comment'># same reason of vec[0] to be 2.0 times for the viewer.
</span>  <span class='kw'>return</span> <span class='id identifier rubyid_text'>text</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rotating-instance_method">
  
    #<strong>rotating</strong>(theta)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68
69
70
71
72
73
74
75
76
77
78
79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker.rb', line 66</span>

<span class='kw'>def</span> <span class='id identifier rubyid_rotating'>rotating</span><span class='lparen'>(</span><span class='id identifier rubyid_theta'>theta</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_rot'>rot</span><span class='op'>=</span><span class='lbracket'>[</span><span class='lbracket'>[</span><span class='id identifier rubyid_cos'>cos</span><span class='lparen'>(</span><span class='id identifier rubyid_theta'>theta</span><span class='rparen'>)</span><span class='comma'>,</span><span class='op'>-</span><span class='id identifier rubyid_sin'>sin</span><span class='lparen'>(</span><span class='id identifier rubyid_theta'>theta</span><span class='rparen'>)</span><span class='comma'>,</span><span class='float'>0.0</span><span class='rbracket'>]</span><span class='comma'>,</span>
       <span class='lbracket'>[</span><span class='id identifier rubyid_sin'>sin</span><span class='lparen'>(</span><span class='id identifier rubyid_theta'>theta</span><span class='rparen'>)</span><span class='comma'>,</span><span class='id identifier rubyid_cos'>cos</span><span class='lparen'>(</span><span class='id identifier rubyid_theta'>theta</span><span class='rparen'>)</span><span class='comma'>,</span><span class='float'>0.0</span><span class='rbracket'>]</span><span class='comma'>,</span>
       <span class='lbracket'>[</span><span class='float'>0.0</span><span class='comma'>,</span><span class='float'>0.0</span><span class='comma'>,</span><span class='float'>1.0</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_i'>i</span><span class='op'>|</span>
    <span class='id identifier rubyid_tmp'>tmp</span><span class='op'>=</span><span class='lbracket'>[</span><span class='float'>0.0</span><span class='comma'>,</span><span class='float'>0.0</span><span class='comma'>,</span><span class='float'>0.0</span><span class='rbracket'>]</span>
    <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span>
      <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
        <span class='id identifier rubyid_tmp'>tmp</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='op'>+=</span><span class='id identifier rubyid_rot'>rot</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='op'>*</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
    <span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_i'>i</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_tmp'>tmp</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shaping-instance_method">
  
    #<strong>shaping</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker90.rb', line 135</span>

<span class='kw'>def</span> <span class='id identifier rubyid_shaping'>shaping</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_y_cut2'>y_cut2</span> <span class='op'>=</span> <span class='float'>3.90</span> <span class='comment'>#3.6014702879926976  #5.48795472536200
</span>  <span class='id identifier rubyid_x_cut'>x_cut</span> <span class='op'>=</span> <span class='float'>3.498571136907192</span> 
  <span class='id identifier rubyid_y_cut'>y_cut</span> <span class='op'>=</span> <span class='id identifier rubyid_x_cut'>x_cut</span>
  <span class='id identifier rubyid_pos1'>pos1</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_x_max'>x_max</span><span class='op'>=</span><span class='id identifier rubyid_y_max'>y_max</span><span class='op'>=</span><span class='float'>0.0</span>
  <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_each_with_index'>each_with_index</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pos0'>pos0</span><span class='comma'>,</span><span class='id identifier rubyid_i_atom'>i_atom</span><span class='op'>|</span>
    <span class='id identifier rubyid_pos'>pos</span><span class='op'>=</span><span class='lbracket'>[</span><span class='id identifier rubyid_pos0'>pos0</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>*</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos0'>pos0</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>*</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span><span class='id identifier rubyid_pos0'>pos0</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='op'>*</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>&gt;=</span><span class='op'>-</span><span class='id identifier rubyid_x_cut'>x_cut</span><span class='op'>-</span><span class='const'>TINY</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>&lt;</span><span class='id identifier rubyid_x_cut'>x_cut</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>&gt;=</span><span class='int'>0</span><span class='op'>-</span><span class='const'>TINY</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>&lt;</span><span class='id identifier rubyid_y_cut'>y_cut</span><span class='rparen'>)</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_pos1'>pos1</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pos'>pos</span>
      <span class='id identifier rubyid_x_max'>x_max</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_x_max'>x_max</span><span class='op'>&lt;</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
      <span class='id identifier rubyid_y_max'>y_max</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id identifier rubyid_y_max'>y_max</span><span class='op'>&lt;</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>&lt;=</span><span class='op'>-</span><span class='float'>1.5</span> <span class='op'>||</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>&gt;=</span><span class='float'>1.5</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
        <span class='lparen'>(</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>&gt;=</span><span class='id identifier rubyid_y_cut'>y_cut</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>&lt;=</span><span class='id identifier rubyid_y_cut2'>y_cut2</span><span class='rparen'>)</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_pos'>pos</span>
      <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>-=</span> <span class='float'>3.498571136907192</span> <span class='comment'>#0.3777777777777777
</span>      <span class='id identifier rubyid_pos1'>pos1</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pos'>pos</span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@pos</span> <span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_pos1'>pos1</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>|</span>
    <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>/</span><span class='float'>3.498571136907192</span> 
    <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>/</span><span class='float'>3.498571136907192</span> 
    <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='op'>/</span><span class='float'>2.0</span>
    <span class='ivar'>@pos</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_pos'>pos</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='op'>=</span><span class='float'>3.498571136907192</span> 
  <span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='op'>=</span><span class='float'>3.498571136907192</span> 
  <span class='ivar'>@pos_size</span> <span class='op'>=</span> <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
  <span class='id identifier rubyid_p'>p</span> <span class='lbracket'>[</span><span class='ivar'>@pos_size</span><span class='comma'>,</span><span class='id identifier rubyid_x_max'>x_max</span><span class='comma'>,</span><span class='id identifier rubyid_y_max'>y_max</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="translating-instance_method">
  
    #<strong>translating</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


81
82
83
84
85
86
87
88
89
90
91
92</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/boundary/model/maker.rb', line 81</span>

<span class='kw'>def</span> <span class='id identifier rubyid_translating'>translating</span>
  <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_pos'>pos</span><span class='op'>|</span>
    <span class='id identifier rubyid_r_pos'>r_pos</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='float'>0.0</span><span class='comma'>,</span> <span class='float'>0.0</span><span class='comma'>,</span> <span class='float'>0.0</span><span class='rbracket'>]</span>
    <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_j'>j</span><span class='op'>|</span>
      <span class='int'>3</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id identifier rubyid_k'>k</span><span class='op'>|</span>
        <span class='id identifier rubyid_r_pos'>r_pos</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='op'>+=</span><span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='op'>*</span><span class='ivar'>@lat_vec</span><span class='lbracket'>[</span><span class='id identifier rubyid_j'>j</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id identifier rubyid_k'>k</span><span class='rbracket'>]</span><span class='semicolon'>;</span>
      <span class='rbrace'>}</span>
    <span class='rbrace'>}</span>
    <span class='id identifier rubyid_pos'>pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>+=</span> <span class='float'>1.0</span> <span class='kw'>if</span> <span class='id identifier rubyid_r_pos'>r_pos</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>&lt;</span> <span class='op'>-</span><span class='float'>0.00001</span>
  <span class='rbrace'>}</span>
  <span class='ivar'>@pos_size</span> <span class='op'>=</span> <span class='ivar'>@pos</span><span class='period'>.</span><span class='id identifier rubyid_size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Sat Jan  7 13:31:45 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.5 (ruby-2.2.2).
</div>

    </div>
  </body>
</html>